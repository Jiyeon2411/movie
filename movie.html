<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>상세 페이지</title>
    <link rel="stylesheet" href="./css/style.css" />
  </head>
  <body>
    <div class="wrap">
      <header></header>

      <main>
        <div class="menu">
          <ul>
            <li><a href="#">메인</a></li>
            <li><a href="#">기사</a></li>
            <li><a href="#">랭킹</a></li>
            <li><a href="#">개봉/예정작</a></li>
          </ul>
        </div>
        <div class="content">
          <div>
            <div class="img" style="height: 450px; width: 300px"></div>
            <div>
              <div>
                <h1 class="title" style="font-size: 40px"></h1>
                <h2 style="font-size: 25px">개봉일</h2>
                <span
                  class="date"
                  style="margin-top: 20px; font-size: 20px; height: 100px"
                >
                </span>
              </div>
              <div>
                <h2 style="font-size: 25px">개요</h2>
                <span
                  class="content"
                  style="font-size: 20px; height: 100px; width: 1050px"
                ></span>
                <h2 style="font-size: 25px">감독</h2>
                <span style="font-size: 20px; height: 50px"
                  >Takehiko Inoue
                </span>
              </div>
            </div>
          </div>
        </div>
        <div class="content2">
          <div>
            <h2 style="font-size: 25px">장르</h2>
            <span class="genre" style="font-size: 20px"></span>
          </div>
          <div>
            <h2 style="font-size: 25px">제작사</h2>
            <span class="company" style="font-size: 20px"></span>
          </div>
        </div>
        <div class="content3">
          <div>
            <h2 style="font-size: 25px">평점</h2>
            <span class="score" style="font-size: 20px"></span>
          </div>
        </div>
      </main>

      <footer></footer>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

    <script>
      const movieURL =
        "https://api.themoviedb.org/3/movie/783675?api_key=159f2c588b7f854752d419211bdea484&language=ko-KR"
      $.ajax({
        type: "GET",
        url: movieURL,
        dataType: "json",
        async: false,
        success: function (data) {
          console.log("전체 data:", data)
          $(".title").append(data.title)
          $(".date").append(data.release_date)
          $(".content").append(data.overview)
          $(".genre").append(data.genres[{ name }])
          $(".company").append(data.name)
          $(".score").append(data.vote_average)

          let imgURL = "https://image.tmdb.org/t/p/w500" + data.poster_path

          $(".img").append(
            `<a href="./detail.html?id=${data.id}"><img src="${imgURL}"></a>`
          )

          /*const results = data.results
                console.log("영화 목록", results)

                for (const result of results) {
                  console.log(result)
                  console.log("영화제목: ", result.title)
                  console.log("영화상세설명: ", result.overview)
                  console.log("평점: ", result.vote_average)
                  console.log("포스터: ", result.poster_path)

                  let imgURL = "https://image.tmdb.org/t/p/w500" + result.poster_path

                  $(".images").append(
                    `<a href="./detail.html?id=${result.id}"><img src="${imgURL}"></a>`
                  )
                  $(".images").append(`${result.title}`)
                }*/
        },
        error: function (request, status, error) {
          console.log("code:" + request.status)
          console.log("message:" + request.responseText)
          console.log("error:" + error)
        },
      })
    </script>
  </body>
</html>
